<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Basic Canvas usage: animation</title>
 
</head>
<body>
<header>
    <h1>Basic Canvas usage: animation</h1>
    <input type="text" id="inputText">
    <button onclick="start()">Start</button>
</header>

<audio src="../multimedia/audio/movieCountdown.mp3" id="movieCountdown"></audio>
<canvas width="1000px" height="500px" id="countDown" style="border: 1px solid gray">
</canvas>
<script>
    function start() {
        var canvas;
        var context;
        var sound = document.querySelector("#movieCountdown");
        
        canvas = document.getElementById('countDown');
        context = canvas.getContext('2d');
        context.font = "150px Arial";
        context.textAlign = "center";

        function draw(count, countInterval) {
            context.beginPath();
            context.font = "150px Arial";
            context.textAlign = "center";
            context.fillStyle = "black";
            context.fillRect(0, 0, canvas.width, canvas.height);
            context.fillStyle = "#ccc";
            context.arc(canvas.width/2, canvas.height/2, canvas.height/2, 0, 2 * Math.PI);
            context.fill();
            context.fillStyle = "grey";
            context.translate(canvas.width/2, canvas.height/2);
            context.rotate(countInterval * Math.PI / 180);
            context.translate(-canvas.width/2, -canvas.height/2);
            context.fillRect(canvas.width/2, canvas.height/2, canvas.height/2, 10);
            context.rotate(0 * Math.PI / 180);
            context.fillStyle = "white";
            context.fillText(count, canvas.width/2, canvas.height/2);
        }
        
        function clearCanvas () {
            canvas.width = canvas.width;
        }
        
        var count = 5;
        var countInterval = -90;
        function countDown() {
            clearCanvas();
            draw(count, countInterval);
            setTimeout(function() {
                if (countInterval == 270){
                    countInterval = -90;
                    if (count > 0) {
                        count--;
                        sound.play();
                        countDown();
                    } else {
                        console.log('nise');
                    }
                } else {
                    countInterval++;
                    countDown();
                }
            }, 1);
        }
        countDown();
    }
</script>
</body>
</html>
